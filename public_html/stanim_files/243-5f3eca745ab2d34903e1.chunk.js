(window.webpackJsonp=window.webpackJsonp||[]).push([[243],{1022:function(e,i,t){},1023:function(e,i,t){},1489:function(e,i,t){"use strict";var r=t(1022);t.n(r).a},1490:function(e,i,t){"use strict";var r=t(1023);t.n(r).a},1844:function(e,i,t){"use strict";t.r(i);var r=t(3),d=t.n(r),s=t(8),a=t(68),o=t.n(a),n=t(517),c=t(183),v={name:"SearchbarWidgetProvider",props:{provider:t(1).a.object.isRequired},computed:{favicon:function(){return this.$urlHelper.faviconLink(this.provider.url)}},methods:{emitDelete:function(){this.$emit("delete")}}},g=(t(1489),t(7)),l=Object(g.a)(v,function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("li",{staticClass:"search-widget-provider"},[t("div",{staticClass:"search-widget-provider__container"},[t("img",{staticClass:"search-widget-provider__favicon",attrs:{alt:"",src:e.favicon}}),e._v(" "),t("i",{staticClass:"search-widget-provider__favicon search-widget-provider__favicon_changing fa fa-pencil"}),e._v(" "),t("div",{staticClass:"search-widget-provider__body"},[t("div",{staticClass:"search-widget-provider__title"},[t("span",{staticClass:"search-widget-provider__name"},[e._v(e._s(e.provider.name))]),e._v(" "),t("span",{staticClass:"search-widget-provider__url"},[e._v(e._s(e.provider.url))])])]),e._v(" "),t("a",{staticClass:"search-widget-provider__button",on:{click:function(i){return i.stopPropagation(),e.emitDelete(i)}}},[t("i",{staticClass:"search-widget-provider__icon fa fa-trash"})])])])},[],!1,null,null,null).exports,h=t(176),u={name:"SearchbarWidget",components:{BaseWidget:n.a,SearchBar:c.a,SearchbarWidgetProvider:l,draggable:o.a},mixins:[h.a],data:function(){return{defaultIcon:"fa-search",preview:{title_phrase:"search"},options:{currentProvider:null}}},computed:d()({},Object(s.c)("page",["getWidgetProviders"]),{searchProvidersList:{get:function(){return this.getWidgetProviders({publicId:this.publicId,widgetId:this.widgetData.id})},set:function(e){this.reorderWidgetProviders({publicId:this.publicId,widgetId:this.widgetData.id,providers:e}),this.setDefaultProvider()}},layeredContextMenuConfig:function(){var e=this,i=this.getWidgetActionsField({ignoreDisplay:!0});return i.items.unshift({id:"add_provider",label:this.$t("add_search_provider"),clickHandler:function(){e.toggleAddProviderSidebar(),e.closeContextSidebar()}}),this.getLayeredContextMenuConfig(i)}}),created:function(){this.setDefaultProvider()},methods:d()({},Object(s.b)("page",["reorderWidgetProviders","saveWidgetProvidersOrder","addWidgetProvider","editWidgetProvider","deleteSearchWidgetProvider"]),{setDefaultProvider:function(){var e=this.widgetData.items.providers[0];e&&this.setProvider(e)},setProvider:function(e){this.options.currentProvider=e},toggleAddProviderSidebar:function(){var e=this,i={mode:"add",widgetId:this.widgetData.id,fromNewSearchbarWidget:!0,onProviderSelect:function(i){var t=i.data;e.processProviderAdding(t)}};this.$eventBus.$emit("toggle-sidebar",{name:"providersActions"},i)},processProviderAdding:function(e){this.addWidgetProvider({publicId:this.publicId,widgetId:this.widgetData.id,provider:e}),1===this.widgetData.items.providers.length&&this.setDefaultProvider()},processProviderEditing:function(e){this.editWidgetProvider({publicId:this.publicId,widgetId:this.widgetData.id,providerId:e.item_id,provider:e}),this.options.currentProvider.item_id===e.item_id&&this.selectProvider(e.item_id)},selectProvider:function(e){var i=this.widgetData.items.providers.find(function(i){return i.item_id===e});i&&this.setProvider(i)},emitDeleteProvider:function(e){this.editWidgetProvider({publicId:this.publicId,widgetId:this.widgetData.id,providerId:e.item_id}),this.options.currentProvider.item_id===e.item_id&&this.setDefaultProvider(),this.deleteSearchWidgetProvider({id:this.widgetData.id,providerId:e.item_id}).catch(this.$logger.log)},emitEditProvider:function(e){var i=this,t={mode:"edit",widgetId:this.widgetData.id,fromNewSearchbarWidget:!0,onProviderSelect:function(e){i.processProviderEditing(e)},providerObject:e};this.$eventBus.$emit("toggle-sidebar",{name:"providersActions"},t)},saveNewOrder:function(){this.saveWidgetProvidersOrder({id:this.widgetData.id,items:this.widgetData.items.providers})},isEmpty:function(){return!this.widgetData.items.providers||!this.widgetData.items.providers.length},emptyWidgetActionConfig:function(){return{icon:this.defaultIcon,label:this.$t("add_search_engine"),actionHandler:this.toggleAddProviderSidebar}}})},p=(t(1490),Object(g.a)(u,function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"searchbar-widget"},[t("BaseWidget",{attrs:{"is-overflow-allowed":"","is-marginless":e.isEditingState}},[e.isEditingState?[t("draggable",e._b({staticClass:"searchbar-widget__container",attrs:{tag:"ul","data-widget-id":e.widgetData.id},on:{end:e.saveNewOrder},model:{value:e.searchProvidersList,callback:function(i){e.searchProvidersList=i},expression:"searchProvidersList"}},"draggable",{group:"search-widget-providers",handle:".search-widget-provider",ghostClass:"search-widget-provider_is-ghost",dragClass:"search-widget-provider_is-dragged",touchStartThreshold:3},!1),e._l(e.searchProvidersList,function(i,r){return t("SearchbarWidgetProvider",{key:r,staticClass:"searchbar-widget__item",attrs:{"data-provider-id":i.item_id,provider:i},on:{delete:function(t){return e.emitDeleteProvider(i)}},nativeOn:{click:function(t){return t.stopPropagation(),e.emitEditProvider(i)}}})}),1),e._v(" "),t("a",{staticClass:"searchbar-widget__adder",class:{"searchbar-widget__adder_theme_dark":e.isDark},on:{click:e.toggleAddProviderSidebar}},[t("span",{staticClass:"searchbar-widget__plus"},[e._v("+")]),e._v(" "),t("span",{staticClass:"searchbar-widget__text"},[e._v(e._s(e.$t("add_search_engine")))])])]:t("div",{staticClass:"searchbar-widget__body"},[t("SearchBar",{attrs:{"no-autofocus":"","is-widget-mode":"","from-new-searchbar-widget":"","widget-providers":e.searchProvidersList,options:e.options,"on-provider-select":e.selectProvider}})],1)],2)],1)},[],!1,null,null,null));i.default=p.exports}}]);